---
title: 2019.2总结  
date:  2019/2/12
categories: 
    - 学习
    - 每月总结 
---
### IE浏览器url中文乱码
IE浏览器直接拼接url,中文会乱码，需要像下面这样进行转码
 ```
 <a :href="`/ctyun/clientcase?tag=${encodeURI(data[current].tag)}`" >
 ```
 用router-link的就不用转码：
 ```
 <router-link :to="{name:'clientcase',query:{tag:item.tag}}" >
 或者
<router-link v-if="item.id" :to="{path:`/clientcase?tag=${item.tag}&id=${item.id}`}" >
 ```

 ### 组件上有ref的话，这个组件不可以使用懒加载
 ```
  <template v-for="item in partnerList">
    <case-item :data="item" :key="item.index" :ref="`case${item.id}`"></case-item>
</template>
```
```js
    components: { CaseItem },//正确的做法
    components: { CaseItem:()=>import('....') },//懒加载的做法  
 getData(type, offset, limit) {
    xxxxx.then((res) => {
    this.partnerList.push(...res.item);
    this.scrollTo(this.selectedId);
    });
},
scrollTo(id) {
    this.$nextTick(() => {
        const target = this.$refs[`case${id}`];
        xxxxx
    });
},
```
如果``<case-item>``是懒加载的话，第一次进入这个页面``target = this.$refs[`case${id}`];``是undefined

### @click="func"和@click="fun()"的区别
1. 如果func函数没有参数，就没有区别
2. 如果func函数有参数，例如``func(arg){...}``，那么``@click="func"`` 在func(arg)里面输出arg并不是undefined，而是一个事件对象

#:class可以是一个数组
```js
boxClazz(){
    return ['box',  !this.canAddHideAnimationLater ? '' : this.visible ? 'show': 'hide']
}
<nav :class="boxClazz" ></nav>
```
### 动态挂载组件
```js
import Vue from 'vue';
import imgPreview from './img-preview.vue';
let instance;

let imgPreviewConsturctor = Vue.extend(imgPreview);


const initInstance = () => {
  const el = document.createElement('div')
  el.id="__img_preview_box"
  document.body.appendChild(el);
  instance = new imgPreviewConsturctor().$mount(`#${el.id}`);
  
};

const init = (imgSrc) => {
	if(!instance){
		initInstance();
	}
	instance.imgSrc = imgSrc;
	instance.visible = true;
}
export default {
	init
}
```